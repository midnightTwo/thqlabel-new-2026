import React from 'react';
import { ContractFormData, shortCountry, toInstrumentalCase, formatContractDate } from './contractUtils';

interface ContractTemplateProps {
  data: ContractFormData;
  contractNumber: string;
  contractDate?: Date;
  nickname: string;
  tracks: Array<{ title: string; audioMetadata?: { duration?: number } | null; authors?: Array<{ fullName: string }> }>;
  isLight?: boolean;
  signatureDataUrl?: string;
  plotnikovSignatureUrl?: string;
}

function formatDuration(seconds?: number): string {
  if (!seconds) return '—';
  const m = Math.floor(seconds / 60);
  const s = Math.floor(seconds % 60);
  return `${m}:${s.toString().padStart(2, '0')}`;
}

export default function ContractTemplate({ data, contractNumber, contractDate, nickname, tracks, signatureDataUrl, plotnikovSignatureUrl }: ContractTemplateProps) {
  const dateStr = formatContractDate(contractDate);
  const countryShort = shortCountry(data.country);
  const fullNameInstr = toInstrumentalCase(data.fullName);

  // Use provided base64 URL or fallback to /rospis.png
  const plotnikovSig = plotnikovSignatureUrl || '/rospis.png';

  /* ---- docx-style: всегда чёрный текст, белый фон, простые рамки ---- */
  const docStyle: React.CSSProperties = {
    fontFamily: "'Times New Roman', 'Noto Serif', Georgia, serif",
    fontSize: '12px',
    lineHeight: '1.6',
    color: '#000000',
    backgroundColor: '#ffffff',
  };

  const h2Style: React.CSSProperties = { fontSize: '14px', fontWeight: 700, textAlign: 'center' as const, marginBottom: '4px' };
  const h3Style: React.CSSProperties = { fontSize: '13px', fontWeight: 700, marginBottom: '6px' };
  const thStyle: React.CSSProperties = { border: '1px solid #000', padding: '4px 6px', fontWeight: 600, backgroundColor: '#f0f0f0', fontSize: '11px' };
  const tdStyle: React.CSSProperties = { border: '1px solid #000', padding: '4px 6px', fontSize: '11px' };

  // Reusable signature block for appendices
  const renderSignatureBlock = () => (
    <div className="ct-two-col" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '16px', marginTop: '24px', fontSize: '11px', textAlign: 'center' }}>
      <div>
        <p style={{ fontWeight: 600, marginBottom: '8px' }}>Лицензиар</p>
        {signatureDataUrl ? (
          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
            <img data-sig="user" src={signatureDataUrl} alt="Подпись" style={{ height: '40px', objectFit: 'contain', display: 'block', marginBottom: '4px' }} />
            <p style={{ fontStyle: 'italic', fontSize: '10px', margin: 0 }}>/{data.fullName}/</p>
          </div>
        ) : (
          <p style={{ fontStyle: 'italic', margin: 0 }}>/{data.fullName}/</p>
        )}
      </div>
      <div>
        <p style={{ fontWeight: 600, marginBottom: '4px' }}>Лицензиат</p>
        <p style={{ fontSize: '9px', opacity: 0.85, margin: '0 0 4px' }}>физическое лицо, применяющее специальный налоговый режим «Налог на профессиональный доход (НПД)»</p>
        <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
          <img data-sig="plotnikov" src={plotnikovSig} alt="Подпись Лицензиата" style={{ height: '40px', objectFit: 'contain', display: 'block', marginBottom: '4px' }} />
          <p style={{ fontStyle: 'italic', fontSize: '10px', margin: 0 }}>/Плотников Никита Владимирович/</p>
        </div>
      </div>
    </div>
  );

  return (
    <div className="contract-template" style={docStyle}>
      {/* Mobile responsive overrides */}
      <style>{`
        @media (max-width: 640px) {
          .contract-template .ct-two-col {
            grid-template-columns: 1fr !important;
          }
          .contract-template .ct-table-wrap {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
          }
          .contract-template .ct-table-wrap table {
            min-width: 420px;
          }
          .contract-template .ct-header-row {
            flex-direction: column !important;
            align-items: center !important;
            gap: 2px;
          }
          .contract-template .ct-party-box {
            padding: 6px !important;
          }
          .contract-template .ct-party-box p,
          .contract-template .ct-party-box div {
            word-break: break-word;
          }
        }
      `}</style>

      {/* ===== ЗАГОЛОВОК ===== */}
      <div style={{ textAlign: 'center', marginBottom: '16px' }}>
        <h2 style={h2Style}>ЛИЦЕНЗИОННЫЙ ДОГОВОР № {contractNumber}</h2>
        <div className="ct-header-row" style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginTop: '4px' }}>
          <span>г. Ростов-на-Дону</span>
          <span>{dateStr}</span>
        </div>
      </div>

      {/* ===== ПРЕАМБУЛА ===== */}
      <p style={{ textIndent: '24px', marginBottom: '10px' }}>
        Гражданин {countryShort} <strong>{data.fullName}</strong>, действующий от своего имени и в своем интересе, именуемый в дальнейшем «Лицензиар», с одной стороны, и Гражданин Российской Федерации <strong>Плотников Никита Владимирович</strong>, физическое лицо, применяющее специальный налоговый режим «Налог на профессиональный доход (НПД)», именуемый в дальнейшем «Лицензиат», с другой стороны, именуемые совместно – «Стороны», а по отдельности «Сторона», заключили настоящий договор (далее — «Договор»), о нижеследующем:
      </p>

      {/* ===== 1. ТЕРМИНОЛОГИЯ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>1. Терминология, используемая в Договоре</h3>
        <p style={{ textIndent: '24px' }}><strong>Произведение</strong> — музыкальное произведение с текстом, сведения о котором указаны в Приложениях к Договору;</p>
        <p style={{ textIndent: '24px' }}><strong>Исполнение</strong> — представление {fullNameInstr || '___'} (Исполнитель – «{nickname || '___'}») (далее – «исполнитель») Произведения посредством пения (или игры на музыкальных инструментах) в живом исполнении и/или с помощью технических средств;</p>
        <p style={{ textIndent: '24px' }}><strong>Фонограмма</strong> — исключительно звуковая запись Исполнения Произведения, наименование и изготовитель которой указаны в Приложениях к настоящему Договору;</p>
        <p style={{ textIndent: '24px' }}><strong>Объекты</strong> — Произведения и/или Исполнения и/или Фонограммы, исключительные права на которые принадлежат Лицензиару, а также любые их части, которые в соответствии с действующим законодательством относятся к результатам интеллектуальной деятельности;</p>
        <p style={{ textIndent: '24px' }}><strong>Караоке</strong> — форма использования Произведения, существующая в форме технической переработки аудиозаписи и/или видеозаписи (механической, магнитной, цифровой, оптической и так далее), предназначенная для использования в качестве аккомпанемента вокального исполнения;</p>
        <p style={{ textIndent: '24px' }}><strong>Мобильный контент</strong> — собирательно рингтоны, реалтоны, рингбэктоны, фуллтреки, а также любые иные объекты, созданные с использованием Произведений, предназначенные для использования в мобильных устройствах (в т.ч. телефонах, смартфонах, КПК и иных аналогичных устройствах);</p>
        <p style={{ textIndent: '24px' }}><strong>Файлы</strong> — Произведение и/или Исполнение и Фонограмма в любых цифровых форматах, как известных в настоящем, так и тех, которые могут появиться в будущем;</p>
        <p style={{ textIndent: '24px' }}><strong>Контент</strong> — Караоке, Мобильный контент и/или Файлы при их совместном упоминании в Договоре;</p>
        <p style={{ textIndent: '24px' }}><strong>ЦЭР</strong> — цифровое электронное распространение, т.е. распространение Объектов в форме Файлов каким-либо способом, существующим в настоящий момент или изобретенным в будущем, в том числе посредством телефонной, спутниковой, телевизионной, кабельной связи или посредством ресурсов сети Интернет;</p>
        <p style={{ textIndent: '24px' }}><strong>Исходный материал</strong> — материальные носители эталонного качества, содержащие записи экземпляров Объектов в формате «.WAV», пригодные для воспроизведения Объектов всеми способами, предусмотренными Договором;</p>
        <p style={{ textIndent: '24px' }}><strong>Срок</strong> — период времени, на который Лицензиар предоставляет Лицензиату право использования Объектов. Срок в отношении каждого из Объектов исчисляется с даты подписания соответствующего Приложения к Договору, содержащего наименование Объекта, и составляет срок действия исключительного права на соответствующий Объект, если иное не предусмотрено Приложением.</p>
        <p style={{ textIndent: '24px' }}><strong>Территория</strong> — означает территорию всех стран мира, если иное не указано в Приложениях к Договору.</p>
        <p style={{ textIndent: '24px', marginTop: '6px' }}>Термины, не указанные выше, соответствуют терминам, указанным в действующем Гражданском Кодексе Российской Федерации (далее – ГК РФ), а в случае отсутствия какого-либо термина в вышеуказанном ГК РФ, обычаям делового оборота и терминам, применяемым при аналогичных правоотношениях в аналогичной ситуации.</p>
      </div>

      {/* ===== 2. ПРЕДМЕТ ДОГОВОРА ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>2. Предмет Договора</h3>
        <p style={{ textIndent: '24px' }}>2.1. Лицензиар за вознаграждение предоставляет Лицензиату на исключительной основе на Территорию и Срок право использования Объектов, указанных в Приложениях к Договору, следующими способами:</p>
        
        <p style={{ marginLeft: '24px', marginTop: '6px' }}><strong>«Цифровая дистрибуция»</strong></p>
        <p style={{ marginLeft: '24px' }}>2.1.1. Перерабатывать Объекты, в том числе технически, в следующих целях и следующими способами, для последующего использования способами, предусмотренными Договором:</p>
        <p style={{ marginLeft: '24px' }}>- перерабатывать Объекты в целях создания Контента (в т.ч. Караоке) и рекламного материала Контента, т.е. частей Контента, используемых для продвижения Объектов на цифровых площадках;</p>
        <p style={{ marginLeft: '24px' }}>- путём их конвертации в любые известные цифровые форматы в целях создания на их основе Контента;</p>
        <p style={{ marginLeft: '24px' }}>- изменять длительность Объектов с целью сокращения хронометража для последующего фрагментарного использования;</p>
        <p style={{ marginLeft: '24px' }}>2.1.2. Воспроизводить экземпляры Объектов в любом формате на Носителях без ограничения по тиражу, а также воспроизводить (записывать) Объекты в любом формате (цифровой форме), в том числе в форме Контента, в памяти ЭВМ и иных технических устройств, совместимых с памятью ЭВМ, в том числе приспособленных для хранения цифровых файлов (мобильных телефонов, КПК, терминалов, смартфонов и пр.;</p>
        <p style={{ marginLeft: '24px' }}>2.1.3. Распространять экземпляры Объектов путем продажи или иного отчуждения экземпляров на Носителях, а также экземпляров/цифровых копий (файлов, содержащих Объекты) в форме Контента, в том числе, способом Цифрового Электронного распространения (стриминг);</p>
        <p style={{ marginLeft: '24px' }}>2.1.4. Доводить Объекты до всеобщего сведения таким образом, что любое лицо может получить к ним доступ из любого места и в любое время по собственному выбору, в т.ч. в целях распространения Объектов и Контента, посредством сети Интернет;</p>
        
        <p style={{ marginLeft: '24px', marginTop: '6px' }}><strong>«Механические права»</strong></p>
        <p style={{ marginLeft: '24px' }}>2.1.5. Воспроизводить Объекты, то есть изготавливать один и более экземпляров Объектов или их частей на Носителях, а также в любой иной материальной форме. Распространять экземпляры Объектов на Носителях, в том числе продавать или иным образом отчуждать экземпляры Объектов. Сдавать в прокат экземпляры Объектов на Носителях. Импортировать оригиналы или экземпляры Объектов в целях распространения на Носителях;</p>
        
        <p style={{ marginLeft: '24px', marginTop: '6px' }}><strong>«Публичные права»</strong></p>
        <p style={{ marginLeft: '24px' }}>2.1.6. Публично показывать Объекты и/или публично исполнять Объекты с помощью технических средств или в живом исполнении в месте, открытом для свободного посещения, или в месте, где присутствует значительное число лиц, не принадлежащих к обычному кругу семьи (насколько это может быть применимо к соответствующему из Объектов);</p>
        <p style={{ marginLeft: '24px' }}>2.1.7. Сообщать Объекты в эфир, в том числе через спутник, т.е. сообщать Объекты для всеобщего сведения (включая показ или исполнение) по радио или телевидению, в том числе путем ретрансляции, а также сообщать Объекты по кабелю, т.е. сообщать Объекты для всеобщего сведения по радио или телевидению с помощью кабеля, провода, оптического волокна или аналогичных средств, в том числе путем ретрансляции;</p>
        <p style={{ marginLeft: '24px' }}>2.1.8. Получать вознаграждения авторов, исполнителей, за свободное воспроизведение фонограмм и аудиовизуальных произведений в личных целях (статья 1245 ГК РФ), вознаграждение авторов Произведений (с текстом и/или без текста), использованных в аудиовизуальном произведении, при публичном исполнении либо сообщении в эфир или по кабелю такого аудиовизуального произведения (статья 1263 ГК РФ), а также вознаграждение исполнителей за публичное исполнение Фонограммы, опубликованной в коммерческих целях, а также за ее сообщение в эфир или по кабелю, в соответствии со ст.1326 ГК РФ. В этих целях Лицензиат, в том числе, вправе заключать договоры с организациями по управлению правами на коллективной основе.</p>
        
        <p style={{ marginLeft: '24px', marginTop: '6px' }}><strong>«Синхронизация»</strong></p>
        <p style={{ marginLeft: '24px' }}>2.1.9. Включать в целях дальнейшего распространения в составные произведения и распространять Объекты в составе альбомов, сборников (составных произведений). Включать Объекты и/или их части в состав любых сложных объектов (в том числе аудиовизуальных произведений), в том числе, создаваемых для рекламы.</p>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>2.2. Лицензиар разрешает Лицензиату и его сублицензиатам обнародовать Объекты любыми из перечисленных в настоящем Договоре способами, а также самостоятельно решать указывать или нет имя/псевдоним авторов/исполнителей/изготовителя Фонограмм, в случае, если такое указание невозможно в силу особенностей использования (право на анонимное использование).</p>
        <p style={{ textIndent: '24px' }}>2.3. Лицензиар настоящим даёт Лицензиату согласие на предоставление третьим лицам прав, полученных по Договору (право на сублицензирование).</p>
        <p style={{ textIndent: '24px' }}>2.4. Лицензиат обязуется руководствоваться приоритетом популяризации Объектов и увеличения доходности от использования Объектов при их использовании и выдаче сублицензий на их использование способами, указанными в п. 2.1. Договора.</p>
        <p style={{ textIndent: '24px' }}>2.5. Право использования Объектов, являющееся предметом настоящего Договора, считается предоставленными Лицензиаром Лицензиату с даты подписания Сторонами соответствующего Приложения к Договору, содержащего наименование (название) соответствующего Объекта и/или другие данные о нём.</p>
        <p style={{ textIndent: '24px' }}>2.6. Лицензиар выражает свое согласие со внесением Лицензиатом и иными лицами с разрешения Лицензиата в Объекты изменений, сокращений и дополнений, снабжение их при их использовании иллюстрациями, предисловием, послесловием, комментариями или какими бы то ни было пояснениями.</p>
      </div>

      {/* ===== 3. ПРАВА И ОБЯЗАННОСТИ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>3. Права и обязанности Сторон</h3>
        
        <p style={{ fontWeight: 600 }}>3.1. Лицензиар обязуется:</p>
        <p style={{ marginLeft: '24px' }}>3.1.1. в момент подписания соответствующего Приложения к Договору передать Лицензиату Исходные материалы;</p>
        <p style={{ marginLeft: '24px' }}>3.1.2. в течение Срока на Территории не предоставлять третьим лицам право использования Объектов способами, предоставленными Лицензиату по настоящему Договору;</p>
        <p style={{ marginLeft: '24px' }}>3.1.3. урегулировать любые претензии обладателей исключительных прав на Объекты, связанные с использованием Объектов, предоставленных по настоящему Договору. В случае если какие-либо третьи лица предъявят к Лицензиату претензии, связанные с выплатой вознаграждения и осуществлением иных платежей, Лицензиар предпримет действия, исключающие возникновение расходов и убытков Лицензиата, связанных с подобными претензиями, и компенсирует такие расходы и убытки в случае, если таковые понесет Лицензиат.</p>
        
        <p style={{ fontWeight: 600, marginTop: '8px' }}>3.2. Лицензиар вправе:</p>
        <p style={{ marginLeft: '24px' }}>3.2.1. требовать от Лицензиата своевременной выплаты вознаграждения в полном объеме за предоставляемые по настоящему Договору права использования Объектов, согласно правилам предоставления отчетности, согласованным Сторонами в Финансовом соглашении к Договору.</p>
        
        <p style={{ fontWeight: 600, marginTop: '8px' }}>3.3. Лицензиат обязуется:</p>
        <p style={{ marginLeft: '24px' }}>3.3.1. использовать Объекты исключительно способами на условиях, предусмотренных настоящим Договором;</p>
        <p style={{ marginLeft: '24px' }}>3.3.2. выплачивать Лицензиару вознаграждение в размере, порядке и в срок, предусмотренные разделом 4 настоящего Договора;</p>
        <p style={{ marginLeft: '24px' }}>3.3.3. предоставлять Лицензиару отчеты об использовании Объектов, в порядке и в сроки, указанные в Финансовом соглашении к Договору;</p>
        
        <p style={{ fontWeight: 600, marginTop: '8px' }}>3.4. Лицензиат вправе:</p>
        <p style={{ marginLeft: '24px' }}>3.4.1. самостоятельно использовать Объекты способами и на условиях, предусмотренных настоящим Договором;</p>
        <p style={{ marginLeft: '24px' }}>3.4.2. предоставлять полученные по настоящему Договору права на все Объекты любым третьим лицам (полностью или частично) путем выдачи сублицензий таким лицам.</p>
        <p style={{ marginLeft: '24px' }}>3.4.3. использовать Объекты способами, указанными в п. 2.1. настоящего Договора без ограничения количества воспроизводимых экземпляров указанных Объектов;</p>
        <p style={{ marginLeft: '24px' }}>3.4.4. при использовании Объектов (в т.ч. третьими лицами) указывать или размещать свое наименование и/или логотип, а также наименования и логотипы своих партнеров (в том числе сублицензиатов) и спонсоров, а также любую иную информацию, которую Лицензиат сочтет нужной, на всех рекламных материалах Объектов;</p>
        <p style={{ marginLeft: '24px' }}>3.4.5. в случаях, когда, указание имен (наименований) правообладателей Объектов и информации об авторском или смежном праве затруднено (в том числе в составе Караоке и Мобильного контента), не указывать полностью или частично такую информацию;</p>
        <p style={{ marginLeft: '24px' }}>3.4.6. получать вознаграждение (а также компенсацию) за каждый способ использования Объектов третьими лицами, в том числе, но не ограничиваясь, по выданным Лицензиатом сублицензиям.</p>
      </div>

      {/* ===== 4. ВОЗНАГРАЖДЕНИЕ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>4. Вознаграждение Лицензиара</h3>
        <p style={{ textIndent: '24px' }}>4.1. За предоставление права использования Объектов в соответствии с настоящим Договором, Лицензиат обязуется выплачивать Лицензиару вознаграждение за все способы использования Объектов, указанные в Договоре, в размере, в порядке и в сроки, указанные в Финансовом соглашении к настоящему Договору.</p>
        <p style={{ textIndent: '24px' }}>4.2. Все расчеты по настоящему Договору производятся Лицензиатом путем перечисления денежных средств в российских рублях на банковский/расчетный счет Лицензиара, указанный в реквизитах Договора, если иное не указано в Приложениях к Договору.</p>
      </div>

      {/* ===== 5. ГАРАНТИИ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>5. Гарантии Лицензиара</h3>
        <p style={{ textIndent: '24px' }}>5.1. Стороны имеют ясное понимание того, что Лицензиат заключает настоящий Договор, полагаясь на безусловность и истинность следующих гарантий данных Лицензиаром (заверение об обстоятельствах):</p>
        <p style={{ marginLeft: '24px' }}>5.1.1. Лицензиар является законным обладателем исключительных прав на Объекты и вправе распоряжаться такими правами;</p>
        <p style={{ marginLeft: '24px' }}>5.1.2. на момент подписания настоящего Договора не существует никаких прав, обременений и требований третьих лиц в отношении каждого из Объектов.</p>
        <p style={{ marginLeft: '24px' }}>5.1.3. исключительные права на Объекты не находятся в управлении (коллективном или доверительном) согласно указанным в п. 2.1. способам использования (за исключением обществ по коллективному управлению смежными правами), права не заложены, не состоят под арестом и не обременены другим способом;</p>
        <p style={{ marginLeft: '24px' }}>5.1.4. заключение настоящего Договора и предоставление права использования Объектов, не нарушают законных прав третьих лиц;</p>
        <p style={{ marginLeft: '24px' }}>5.1.5. Лицензиар гарантирует, что не выдавал третьим лицам исключительных лицензий предоставляющих право использования Объектов в пределах и способами, установленными Договором к моменту подписания соответствующего Приложения к Договору, а в случае если такие лицензии в отношении указанных Объектов были выданы Лицензиаром третьим лицам, то срок их действия истек или иным образом их действие прекращено к моменту заключения настоящего Договора.</p>
      </div>

      {/* ===== 6. ОТВЕТСТВЕННОСТЬ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>6. Ответственность Сторон</h3>
        <p style={{ textIndent: '24px' }}>6.1. За неисполнение или ненадлежащее исполнение обязательств по Договору Стороны несут ответственность в соответствии с действующим законодательством Российской Федерации и Договором. В случае возникновения разногласий между Сторонами по поводу исполнения, действительности или толкования Договора, Стороны будут стараться разрешить такое разногласие путем переговоров. Если в течение 30 (тридцати) календарных дней с момента заявления Стороной другой Стороне об имеющем место разногласии такое разногласие не урегулировано или урегулировано не полностью, спор подлежит разрешению в Арбитражном суде г. Москвы (договорная подсудность).</p>
        <p style={{ textIndent: '24px' }}>6.2. Приложениями, дополнительными соглашениями к настоящему Договору могут быть предусмотрены дополнительные меры ответственности, применяемые к Сторонам, которые нарушают / ненадлежащим образом выполняют свои обязательства, нарушают гарантии по Договору.</p>
        <p style={{ textIndent: '24px' }}>6.3. Применимое право по настоящему Договору – законодательство Российской Федерации.</p>
      </div>

      {/* ===== 7. СРОК ДЕЙСТВИЯ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>7. Срок действия Договора</h3>
        <p style={{ textIndent: '24px' }}>7.1. Договор вступает в силу с момента его подписания Сторонами и действует до полного исполнения Сторонами своих обязательств по Договору и Приложениям к нему. Право использования Объектов действует в течение Срока. Срок действия настоящего Договора считается автоматически продленным на каждый последующий календарный год на тех же условиях при условии отсутствия уведомления об ином, направленного одной Стороной в адрес другой Стороны заказным письмом не менее чем за 90 (девяносто) рабочих дней до истечения срока действия настоящего Договора.</p>
        <p style={{ textIndent: '24px' }}>7.2. Настоящий Договор может быть расторгнут Лицензиатом досрочно в одностороннем порядке в случаях, предусмотренных действующим законодательством РФ и настоящим Договором.</p>
      </div>

      {/* ===== 8. ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ ===== */}
      <div style={{ marginBottom: '10px' }}>
        <h3 style={h3Style}>8. Заключительные положения</h3>
        <p style={{ textIndent: '24px' }}>8.1. Условия настоящего Договора, а также иная информация и документы, предоставляемые Сторонами друг другу в ходе исполнения Договора, являются конфиденциальной информацией и не подлежат разглашению третьим лицам. Настоящее положение не применяется, если раскрытие такой информации:</p>
        <p style={{ marginLeft: '24px' }}>- необходимо для исполнения обязательств по настоящему Договору и/или реализации (использования) прав, полученных по настоящему Договору;</p>
        <p style={{ marginLeft: '24px' }}>- требуется в соответствии с положениями законодательства РФ;</p>
        <p style={{ marginLeft: '24px' }}>- получено предварительное письменное согласие другой Стороны.</p>
        <p style={{ textIndent: '24px' }}>8.2. Слова, указанные во множественном числе, означают также единственное число и, наоборот, в зависимости от контекста.</p>
        <p style={{ textIndent: '24px' }}>8.3. В случае если какое-либо из положений настоящего Договора окажется ничтожным или будет признано недействительным в соответствии с законодательством РФ, остальные положения останутся в силе, Договор будет исполняться Сторонами в полном объеме без учета такого положения.</p>
        <p style={{ textIndent: '24px' }}>8.4. Перемена Стороны настоящего Договора осуществляется только на основании предварительного письменного согласия второй Стороны.</p>
        <p style={{ textIndent: '24px' }}>8.5. Все изменения и дополнения к настоящему Договору действительны, если они должным образом подписаны уполномоченными представителями Сторон.</p>
        <p style={{ textIndent: '24px' }}>8.6. Стороны должны сообщать друг другу об изменении своих адресов места нахождения, банковских реквизитов, в противном случае действуют реквизиты, указанные в Договоре. Все заявления, извещения, уведомления и/или требования по настоящему Договору должны быть совершены в письменном виде и непосредственно вручены под расписку. Предварительно соответствующие документы могут быть направлены электронным или факсимильным сообщением. В исключительном случае (при невозможности личного вручения) соответствующий документ может быть направлен Стороне почтой ценным письмом с описью вложения.</p>
        <p style={{ textIndent: '24px' }}>8.7. Стороны признают юридическую силу документов, направленных друг другу посредством использования информационно-телекоммуникационной сети, а именно: в мессенджерах, социальных сетях, а также по адресу электронной почты, которые указаны в п. 9 Договора.</p>
        <p style={{ textIndent: '24px' }}>8.8. В удостоверение своего согласия с вышеизложенными условиями Стороны заключили настоящий Договор в день, указанный на первой странице Договора, в двух оригинальных экземплярах, имеющих одинаковую юридическую силу, по одному для каждой из Сторон.</p>
      </div>

      {/* ===== 9. АДРЕСА, РЕКВИЗИТЫ И ПОДПИСИ ===== */}
      <div style={{ marginTop: '20px', borderTop: '2px solid #000', paddingTop: '12px' }}>
        <h3 style={{ ...h3Style, textAlign: 'center' }}>9. Адреса, реквизиты и подписи Сторон</h3>
        
        <div className="ct-two-col" style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginTop: '12px' }}>
          {/* — Лицензиар — */}
          <div className="ct-party-box" style={{ border: '1px solid #000', padding: '10px' }}>
            <h4 style={{ fontWeight: 700, textAlign: 'center', marginBottom: '8px', fontSize: '12px' }}>Лицензиар</h4>
            <div style={{ fontSize: '11px', lineHeight: '1.5' }}>
              <p>Гражданин {countryShort} <strong>{data.fullName}</strong></p>
              <p>Паспорт: {data.passport}</p>
              <p>Выдан: {data.passportIssuedBy}</p>
              <p>Код подразделения: {data.passportCode}</p>
              <p>Дата выдачи: {data.passportDate}</p>
              <p>E-mail: {data.email}</p>
              {data.bankAccount && (
                <>
                  <p style={{ fontWeight: 600, marginTop: '6px' }}>Банковские реквизиты:</p>
                  <p>Номер счета: {data.bankAccount}</p>
                  <p>БИК: {data.bankBik}</p>
                  {data.bankCorr && <p>Корр. счет: {data.bankCorr}</p>}
                </>
              )}
              {data.cardNumber && <p>Номер карты: {data.cardNumber}</p>}
              <div style={{ marginTop: '12px', paddingTop: '8px', borderTop: '1px dashed #000', textAlign: 'center' }}>
                {signatureDataUrl ? (
                  <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                    <img data-sig="user" src={signatureDataUrl} alt="Подпись Лицензиара" style={{ height: '40px', objectFit: 'contain', display: 'block' }} />
                    <p style={{ fontStyle: 'italic', fontSize: '10px', marginTop: '2px' }}>/{data.fullName}/</p>
                  </div>
                ) : (
                  <p style={{ fontStyle: 'italic' }}>/{data.fullName}/</p>
                )}
              </div>
            </div>
          </div>

          {/* — Лицензиат — */}
          <div className="ct-party-box" style={{ border: '1px solid #000', padding: '10px' }}>
            <h4 style={{ fontWeight: 700, textAlign: 'center', marginBottom: '8px', fontSize: '12px' }}>Лицензиат</h4>
            <div style={{ fontSize: '11px', lineHeight: '1.5' }}>
              <p>Гражданин Российской Федерации</p>
              <p><strong>Плотников Никита Владимирович</strong></p>
              <p style={{ fontSize: '10px', opacity: 0.8 }}>физическое лицо, применяющее специальный налоговый режим «НПД»</p>
              <p>Дата рождения: 23.06.2004</p>
              <p>Адрес регистрации: г. Шахты, пер. Дундича д.14</p>
              <p>Серия и номер паспорта: 6024 816315</p>
              <p>Кем выдан: ГУ МВД РОССИИ ПО РОСТОВСКОЙ ОБЛАСТИ</p>
              <p>Дата выдачи: 24.07.2024</p>
              <p>Код подразделения: 610-009</p>
              <p>ИНН: 615531925831</p>
              <p>Email: thqlabel@ya.ru</p>
              <p>Телефон: +79515352287</p>
              <p style={{ fontWeight: 600, marginTop: '6px' }}>Реквизиты:</p>
              <p>БИК: 044525593</p>
              <p>Номер счёта: 40817810705892387715</p>
              <div style={{ marginTop: '12px', paddingTop: '8px', borderTop: '1px dashed #000', textAlign: 'center' }}>
                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                  <img data-sig="plotnikov" src={plotnikovSig} alt="Подпись Лицензиата" style={{ height: '40px', objectFit: 'contain', display: 'block' }} />
                  <p style={{ fontStyle: 'italic', fontSize: '10px', marginTop: '2px' }}>/Плотников Никита Владимирович/</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* ===== ПРИЛОЖЕНИЕ 1 — Финансовое соглашение ===== */}
      <div style={{ marginTop: '30px', borderTop: '2px solid #000', paddingTop: '12px', pageBreakBefore: 'always' }}>
        <div style={{ textAlign: 'center', marginBottom: '12px' }}>
          <h3 style={h2Style}>Приложение № 1 к Лицензионному договору № {contractNumber} от {dateStr}</h3>
          <h4 style={{ fontWeight: 700, fontSize: '13px', marginBottom: '8px' }}>Финансовое соглашение</h4>
          <div className="ct-header-row" style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginTop: '4px' }}>
            <span>г. Ростов-на-Дону</span>
            <span>{dateStr}</span>
          </div>
        </div>

        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин {countryShort} <strong>{data.fullName}</strong>, действующий от своего имени и в своем интересе, именуемый в дальнейшем «Лицензиар», с одной стороны, и
        </p>
        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин Российской Федерации <strong>Плотников Никита Владимирович</strong>, физическое лицо, применяющее специальный налоговый режим «Налог на профессиональный доход (НПД)», именуемый в дальнейшем «Лицензиат», с другой стороны, именуемые совместно – «Стороны», а по отдельности «Сторона», действуя на основании Договора, составили и подписали настоящее Финансовое соглашение (далее – «Соглашение») о нижеследующем:
        </p>

        <div style={{ marginBottom: '10px' }}>
          <h3 style={h3Style}>Терминология, используемая в Соглашении:</h3>
          <p style={{ textIndent: '24px' }}><strong>«Цифровая дистрибуция»</strong> - использование Лицензиатом (в том числе сублицензиатами и третьими лицами) Объектов способами, указанными в п. 2.1.1.-2.1.4. Договора;</p>
          <p style={{ textIndent: '24px' }}><strong>«Механические права»</strong> - использование Лицензиатом (в том числе сублицензиатами и третьими лицами) Объектов способами, указанными в п. 2.1.5. Договора;</p>
          <p style={{ textIndent: '24px' }}><strong>«Публичные права»</strong> - использование Лицензиатом (в том числе сублицензиатами, третьими лицами и организациями по коллективному управлению правами) Объектов способами, указанными в п. 2.1.6.-2.1.8. Договора;</p>
          <p style={{ textIndent: '24px' }}><strong>«Синхронизация»</strong> - использование Лицензиатом (в том числе сублицензиатами и третьими лицами) Объектов способами, указанными в п. 2.1.9. Договора.</p>
          <p style={{ textIndent: '24px' }}><strong>«Доход Лицензиата»</strong> - сумма финансовых поступлений (выручки) за вычетом применимых налогов, фактически полученная Лицензиатом (в том числе от сублицензиатов и третьих лиц) от использования Объектов и любых иных результатов интеллектуальной деятельности, создаваемых с использованием Объектов, путём Цифровой дистрибуции, Механических прав, Публичных прав и Синхронизации.</p>
          <p style={{ textIndent: '24px' }}><strong>«Отчётный период»</strong> - календарный квартал года. Под календарным кварталом Стороны понимают период времени из 3 (трех) календарных месяцев, отсчет которых ведется от первого числа календарного года;</p>
          <p style={{ textIndent: '24px' }}><strong>«Отчёт»</strong> - печатный и/или электронный документ, содержащий информацию о размере вознаграждения (Роялти) Лицензиара, подлежащего выплате за Отчетный период.</p>
        </div>

        <p style={{ textIndent: '24px', marginTop: '12px' }}>1. Стороны пришли к соглашению, что, если иное не предусмотрено соответствующим Приложением к Договору, то за предоставленные Лицензиаром Лицензиату по Договору права использования Объектов, указанных в Приложениях к Договору, Лицензиат обязуется выплачивать Лицензиару вознаграждение в виде процента от Дохода Лицензиата в размере, в порядке и в сроки, указанные в настоящем Соглашении.</p>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>2. Лицензиат выплачивает Лицензиару Роялти в следующем размере:</p>
        
        <div className="ct-table-wrap">
        <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0' }}>
          <thead>
            <tr>
              <th style={thStyle}>Способы использования</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Роялти от Дохода Лицензиата при реализации авторских прав (Произведений)</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Роялти от Дохода Лицензиата при реализации смежных прав (Исполнений и Фонограмм)</th>
            </tr>
          </thead>
          <tbody>
            {['Цифровая дистрибуция', 'Механические права', 'Публичные права', 'Синхронизация'].map((item) => (
              <tr key={item}>
                <td style={tdStyle}>{item}</td>
                <td style={{ ...tdStyle, textAlign: 'center', fontWeight: 700 }}>80%</td>
                <td style={{ ...tdStyle, textAlign: 'center', fontWeight: 700 }}>80%</td>
              </tr>
            ))}
          </tbody>
        </table>
        </div>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>3. Отчёты предоставляются Лицензиатом Лицензиару в следующем порядке и сроки:</p>
        <p style={{ textIndent: '24px' }}>3.1. Не позднее 45 (сорока пяти) календарных дней после окончания очередного Отчетного периода, Лицензиат направляет Лицензиару на электронный адрес, указанный в реквизитах Договора, печатный (в виде сканированной копии) и/или электронный документ в виде файла формата excel, word, pdf или в ином другом формате, позволяющем целостно и точно воспринимать передаваемую информацию, содержащий Отчет.</p>
        <p style={{ textIndent: '24px' }}>3.2. В течение 5 (пяти) календарных дней с даты получения Отчета, Лицензиар рассматривает его и направляет на адрес электронной почты Лицензиата, указанный в реквизитах Договора, подписанный Отчет в виде сканированной копии, либо мотивированный отказ от принятия Отчета в виде претензии с обоснованием причины в письменной форме. В случае отсутствия сканированной копии согласованного Отчета или претензии Лицензиара, по истечении вышеуказанного срока, Отчет считается принятым Лицензиаром.</p>
        <p style={{ textIndent: '24px' }}>3.3. При этом Стороны Договорились, что Лицензиар может выразить согласие с Отчетом и в иной форме, без подписания и направления Лицензиату подписанной сканированной копии. В том числе путем согласования в переписке с адреса электронной почты или в мессенджере, которые указаны в реквизитах Договора.</p>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>4. Вознаграждение Лицензиара выплачивается в следующем порядке и сроки:</p>
        <p style={{ textIndent: '24px' }}>4.1. В срок не позднее 5 (пяти) календарных дней, с момента получения Лицензиатом от Лицензиара подписанного Отчета в соответствии с п. 3.2. Соглашения, Лицензиат выплачивает Лицензиару все суммы вознаграждения, причитающиеся к выплате Лицензиару на основании Отчётов.</p>
        <p style={{ textIndent: '24px' }}>4.2. Стороны подтверждают, что выплата вознаграждения будет производиться с учетом фактических расходов Лицензиата по выплате вознаграждения третьим лицам - соавторам (соисполнителям) Объектов.</p>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>5. Стороны согласились, что отчетность и документация, заверенная печатями и подписями уполномоченных представителей Сторон, направленная по адресу электронной почты, в соответствии с положениями настоящего Соглашения, обладает той же юридической силой, как если бы данная отчетность и документация была направлена Сторонами на бумажном носителе.</p>
        <p style={{ textIndent: '24px' }}>6. Настоящее Соглашение вступает в силу с даты его подписания Сторонами и действует в течение срока действия Договора.</p>
        <p style={{ textIndent: '24px' }}>7. Настоящее Соглашение является неотъемлемой частью Договора, составлено в 2 (двух) идентичных экземплярах, имеющих одинаковую юридическую силу, по одному для каждой Стороны.</p>
        <p style={{ textIndent: '24px', marginTop: '8px', fontWeight: 600 }}>8. Подписи Сторон</p>

        {renderSignatureBlock()}
      </div>

      {/* ===== ПРИЛОЖЕНИЕ 2 — Список объектов ===== */}
      <div style={{ marginTop: '30px', borderTop: '2px solid #000', paddingTop: '12px', pageBreakBefore: 'always' }}>
        <div style={{ textAlign: 'center', marginBottom: '12px' }}>
          <h3 style={h2Style}>Приложение № 2 к Лицензионному договору № {contractNumber} от {dateStr}</h3>
          <div className="ct-header-row" style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', marginTop: '4px' }}>
            <span>г. Ростов-на-Дону</span>
            <span>{dateStr}</span>
          </div>
        </div>

        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин {countryShort} <strong>{data.fullName}</strong>, действующий от своего имени и в своем интересе, именуемый в дальнейшем «Лицензиар», с одной стороны, и
        </p>
        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин Российской Федерации <strong>Плотников Никита Владимирович</strong>, физическое лицо, применяющее специальный налоговый режим «Налог на профессиональный доход (НПД)», именуемый в дальнейшем «Лицензиат», с другой стороны, именуемые совместно – «Стороны», а по отдельности «Сторона», действуя на основании Договора, составили и подписали настоящее приложение к Договору (далее – «Приложение») о нижеследующем:
        </p>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>1. Лицензиар предоставляет Лицензиату на Территорию и на Срок, право использование следующих Объектов:</p>

        <div className="ct-table-wrap">
        <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0', fontSize: '10px' }}>
          <thead>
            <tr>
              <th style={{ ...thStyle, textAlign: 'center', width: '25px' }}>№</th>
              <th style={thStyle}>Название Произведения</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Длительность</th>
              <th style={thStyle}>Автор музыки</th>
              <th style={thStyle}>Автор слов</th>
              <th style={thStyle}>Исполнители</th>
              <th style={thStyle}>Изготовитель Фонограммы</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Срок лицензии</th>
            </tr>
          </thead>
          <tbody>
            {tracks.length > 0 ? tracks.map((track, idx) => (
              <tr key={idx}>
                <td style={{ ...tdStyle, textAlign: 'center', fontWeight: 700 }}>{idx + 1}</td>
                <td style={{ ...tdStyle, fontWeight: 600 }}>{track.title || '—'}</td>
                <td style={{ ...tdStyle, textAlign: 'center' }}>{formatDuration(track.audioMetadata?.duration)}</td>
                <td style={tdStyle}>{data.fullName}</td>
                <td style={tdStyle}>{data.fullName}</td>
                <td style={tdStyle}>{nickname}</td>
                <td style={tdStyle}>{data.fullName}</td>
                <td style={{ ...tdStyle, textAlign: 'center' }}>1 год</td>
              </tr>
            )) : (
              <tr>
                <td colSpan={8} style={{ ...tdStyle, textAlign: 'center', opacity: 0.5 }}>Треки не добавлены</td>
              </tr>
            )}
          </tbody>
        </table>
        </div>

        <p style={{ textIndent: '24px', marginTop: '8px' }}>2. Настоящим Лицензиат подтверждает, что получил Исходный материал, содержащий профессиональную запись копий вышеуказанного Объекта надлежащего технического качества и эталонного (оригинального) звучания, посредством Интернет-передачи через FTP-протокол.</p>
        <p style={{ textIndent: '24px' }}>3. Настоящее Приложение вступает в силу с даты, указанной в преамбуле (дата подписания), и действует в течение Срока. Во всем, что не предусмотрено настоящим Приложением, Стороны руководствуются условиями Договора. Срок лицензии настоящего приложения считается автоматически продленным на каждый последующий календарный год на тех же условиях при условии отсутствия уведомления об ином, направленного одной Стороной в адрес другой Стороны заказным письмом не менее чем за 90 (девяносто) рабочих дней до истечения срока лицензии объектов настоящего приложения.</p>
        <p style={{ textIndent: '24px' }}>4. Настоящее Приложение является неотъемлемой частью Договора, составлено в 2 (двух) экземплярах одинаковой юридической силы – по одному для каждой из Сторон.</p>
        <p style={{ textIndent: '24px', marginTop: '8px', fontWeight: 600 }}>5. Подписи Сторон</p>

        {renderSignatureBlock()}
      </div>

      {/* ===== ПРИЛОЖЕНИЕ 3 — Форма отчёта ===== */}
      <div style={{ marginTop: '30px', borderTop: '2px solid #000', paddingTop: '12px', pageBreakBefore: 'always' }}>
        <div style={{ textAlign: 'center', marginBottom: '12px' }}>
          <h3 style={h2Style}>Приложение № 3 к Лицензионному договору № {contractNumber} от {dateStr}</h3>
        </div>

        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин {countryShort} <strong>{data.fullName}</strong>, действующий от своего имени и в своем интересе, именуемый в дальнейшем «Лицензиар», с одной стороны, и
        </p>
        <p style={{ textIndent: '24px', marginBottom: '10px' }}>
          Гражданин Российской Федерации <strong>Плотников Никита Владимирович</strong>, физическое лицо, применяющее специальный налоговый режим «Налог на профессиональный доход (НПД)», именуемый в дальнейшем «Лицензиат», с другой стороны, именуемые совместно – «Стороны», а по отдельности «Сторона», действуя на основании Договора, составили и подписали настоящее приложение к Договору (далее – «Приложение») о нижеследующем:
        </p>

        <h4 style={{ fontWeight: 700, fontSize: '13px', textAlign: 'center', marginTop: '16px' }}>ФОРМА ОТЧЁТА</h4>
        <p style={{ margin: '12px 0', textAlign: 'center' }}>Отчёт об использовании Объектов<br/>за период с «____» ____________ 20___ г. по «____» ____________ 20___ г.</p>

        <div className="ct-table-wrap">
        <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0' }}>
          <thead>
            <tr>
              <th style={{ ...thStyle, textAlign: 'center', width: '30px' }}>№ п/п</th>
              <th style={thStyle}>Название</th>
              <th style={thStyle}>Автор музыки</th>
              <th style={thStyle}>Автор текста</th>
              <th style={thStyle}>Исполнитель</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Доход Лицензиата</th>
              <th style={{ ...thStyle, textAlign: 'center' }}>Вознаграждение Лицензиара</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colSpan={7} style={{ ...tdStyle, textAlign: 'center', height: '50px' }}></td></tr>
            <tr><td colSpan={7} style={{ ...tdStyle, textAlign: 'center', height: '50px' }}></td></tr>
            <tr><td colSpan={7} style={{ ...tdStyle, textAlign: 'center', height: '50px' }}></td></tr>
          </tbody>
        </table>
        </div>

        <p style={{ marginTop: '12px' }}><strong>Вознаграждение Лицензиара за период составляет:</strong> ________________________</p>

        {renderSignatureBlock()}
      </div>
    </div>
  );
}
