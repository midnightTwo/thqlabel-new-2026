# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–∫—Ä–æ–ª–ª–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ —á–µ–∫-–ª–∏—Å—Ç–∞ —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã!

### 1. –ö–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `react-easy-crop`
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AvatarCropModal.tsx` —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –§–æ—Ä–º–∞ —Ä–∞–º–∫–∏: –∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑—É–º–æ–º —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º —Å–ª–∞–π–¥–µ—Ä–æ–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–µ–∑–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPEG

### 2. –≠—Ñ—Ñ–µ–∫—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ö—É–∫ `useAvatarScrollEffect.ts`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ–µ "–æ—Ç—Ä–µ–∑–∞–Ω–∏–µ" –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- ‚úÖ –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `clip-path` –∏ `transform`
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `requestAnimationFrame`

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ touch —Å–æ–±—ã—Ç–∏–π (`touchstart`, `touchmove`)
- ‚úÖ Passive event listeners –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ touch-—É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
1. **`app/cabinet/components/modals/AvatarCropModal.tsx`**
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å react-easy-crop
   - –ö–æ–Ω—Ç—Ä–æ–ª—å –∑—É–º–∞ –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

2. **`app/cabinet/hooks/useScrollEffect.ts`**
   - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ö—É–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Å–∫—Ä–æ–ª–ª–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ desktop –∏ mobile
   - –§—É–Ω–∫—Ü–∏–∏ `getClipPathStyle` –∏ `getFadeStyle`

3. **`app/cabinet/hooks/useAvatarScrollEffect.ts`**
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ö—É–∫ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞
   - –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –æ—Ç—Ä–µ–∑–∞–Ω–∏—è
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

4. **`AVATAR_CROP_IMPLEMENTATION.md`**
   - –ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –∑–∞–¥–∞—á
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
   - –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. **`app/cabinet/page.tsx`**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è AvatarCropModal
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

2. **`app/cabinet/components/sidebar/ProfileSidebar.tsx`**
   - –î–æ–±–∞–≤–ª–µ–Ω —ç—Ñ—Ñ–µ–∫—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞
   - –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

3. **`app/cabinet/components/modals/index.ts`**
   - –≠–∫—Å–ø–æ—Ä—Ç –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ AvatarCropModal

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
// –ö–≤–∞–¥—Ä–∞—Ç–Ω–∞—è —Ä–∞–º–∫–∞ —Å–æ —Å–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
<Cropper
  image={imageSrc}
  crop={crop}
  zoom={zoom}
  aspect={1}  // –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω 1:1
  cropShape="rect"
  style={{
    cropAreaStyle: {
      borderRadius: '1rem',
    },
  }}
/>
```

### –≠—Ñ—Ñ–µ–∫—Ç —Å–∫—Ä–æ–ª–ª–∞
```typescript
// –û—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ—Ç—Ä–µ–∑–∞–Ω–∏–µ
progress = Math.pow(progress, 2) * 0.3;

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏
clipPath: `inset(${clipPercentage}% 0 0 0)`,  // –û–±—Ä–µ–∑–∞–Ω–∏–µ —Å–≤–µ—Ä—Ö—É
translateY: progress * 15,                      // –°–º–µ—â–µ–Ω–∏–µ –¥–æ 15px
opacity: Math.max(1 - progress * 1.5, 0.7)     // –ú–∏–Ω–∏–º—É–º 70% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
```

### Touch –ø–æ–¥–¥–µ—Ä–∂–∫–∞
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ touch —É—Å—Ç—Ä–æ–π—Å—Ç–≤
if ('ontouchstart' in window) {
  document.addEventListener('touchstart', handleTouchStart, { passive: true });
  document.addEventListener('touchmove', handleTouchMove, { passive: true });
}
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ö–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä –∏–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ò–∑–º–µ–Ω–∏—Ç—å"
3. –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–¥–æ 5 MB)
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–∞–π–¥–µ—Ä –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (1x - 3x)
6. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å"

### –≠—Ñ—Ñ–µ–∫—Ç —Å–∫—Ä–æ–ª–ª–∞:
- –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–Ω–∏–∑
- –ê–≤–∞—Ç–∞—Ä –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ "–æ—Ç—Ä–µ–∑–∞—Ç—å—Å—è" —Å–≤–µ—Ä—Ö—É
- –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞ desktop (–∫–æ–ª–µ—Å–∏–∫–æ –º—ã—à–∏), —Ç–∞–∫ –∏ –Ω–∞ mobile (—Å–≤–∞–π–ø)

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **RequestAnimationFrame**: –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –±–µ–∑ –ª–∞–≥–æ–≤
2. **Passive listeners**: –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å–∫—Ä–æ–ª–ª–∞
3. **willChange**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è GPU —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
4. **Debouncing**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π

## üéØ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- `react-easy-crop`: ^5.0.8
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ React —Ö—É–∫–∏: `useState`, `useEffect`, `useRef`, `useCallback`

### –§–æ—Ä–º–∞—Ç—ã:
- –í—Ö–æ–¥–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: –ª—é–±—ã–µ (image/*)
- –í—ã—Ö–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–∞—Ç: JPEG (–∫–∞—á–µ—Å—Ç–≤–æ 95%)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 MB

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- ‚úÖ Chrome
- ‚úÖ Firefox
- ‚úÖ Safari
- ‚úÖ Edge
- ‚úÖ iOS Safari
- ‚úÖ Android Chrome

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

1. **Touch —Å–æ–±—ã—Ç–∏—è**: –ù–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–≤–∞–π–ø–æ–≤
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π UI**: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Passive listeners –¥–ª—è 60fps
4. **–ñ–µ—Å—Ç—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ pinch-to-zoom –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. –≠—Ñ—Ñ–µ–∫—Ç —Å–∫—Ä–æ–ª–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∞–≤–∞—Ç–∞—Ä –≤–∏–¥–µ–Ω –Ω–∞ —ç–∫—Ä–∞–Ω–µ
2. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ "–æ—Ç—Ä–µ–∑–∞–Ω–∏–µ" - 30% –æ—Ç –≤—ã—Å–æ—Ç—ã –∞–≤–∞—Ç–∞—Ä–∞
3. –ù–∞ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–∞ –≤ –¥—Ä—É–≥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
```typescript
import { useAvatarScrollEffect } from '@/app/cabinet/hooks/useAvatarScrollEffect';

function MyComponent() {
  const { avatarRef, transform } = useAvatarScrollEffect();
  
  return (
    <div
      ref={avatarRef}
      style={{
        clipPath: transform.clipPath,
        transform: `translateY(${transform.translateY}px)`,
        opacity: transform.opacity,
      }}
    >
      –ö–æ–Ω—Ç–µ–Ω—Ç
    </div>
  );
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —Ö—É–∫–∞:
```typescript
import { useScrollEffect, getClipPathStyle } from '@/app/cabinet/hooks/useScrollEffect';

function MyComponent() {
  const { elementRef, scrollProgress } = useScrollEffect({ speed: 0.5 });
  const style = getClipPathStyle(scrollProgress, 'bottom');
  
  return <div ref={elementRef} style={style}>–ö–æ–Ω—Ç–µ–Ω—Ç</div>;
}
```

## ‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–•—É–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–ª–∏–∑–æ–≤
- –ù–æ–≤–æ—Å—Ç–∏
- –ë–ª–æ–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥–∞–ª–µ—Ä–µ–µ

–ü—Ä–æ—Å—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ö—É–∫ –∏ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –∫ –ª—é–±–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É!
