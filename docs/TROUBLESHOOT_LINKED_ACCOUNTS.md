# ๐ง ะะะะะะะกะขะะะ ะ ะะกะะะะะะะะะ ะะจะะะะ

## โ ะัะธะฑะบะฐ: "Unexpected token '<', "<!DOCTYPE"..."

ะญัะฐ ะพัะธะฑะบะฐ ะพะทะฝะฐัะฐะตั, ััะพ API ะฒะพะทะฒัะฐัะฐะตั HTML ะฒะผะตััะพ JSON.

## ๐ ะจะะ ะะ ะจะะะะ - ะะกะะะะะะะะะ:

### 1๏ธโฃ ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะัะบัะพะนัะต ัะฐะนะป `.env.local` ะธ ัะฑะตะดะธัะตัั ััะพ ะตััั ะะกะ ััะธ ะฟะตัะตะผะตะฝะฝัะต:

```env
NEXT_PUBLIC_SUPABASE_URL=https://ะฒะฐั-ะฟัะพะตะบั.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=ะฒะฐั_anon_key
SUPABASE_SERVICE_ROLE_KEY=ะฒะฐั_service_role_key
```

**ะะดะต ะฒะทััั ะบะปััะธ:**
1. ะัะบัะพะนัะต Supabase Dashboard
2. Settings โ API
3. ะกะบะพะฟะธััะนัะต:
   - Project URL โ `NEXT_PUBLIC_SUPABASE_URL`
   - anon/public key โ `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - service_role key โ `SUPABASE_SERVICE_ROLE_KEY`

### 2๏ธโฃ ะัะฟะพะปะฝะธัะต SQL ัะบัะธะฟั

**ะะะฏะะะขะะะฌะะ!** ะะฐะฟัััะธัะต SQL ะผะธะณัะฐัะธั:

1. ะัะบัะพะนัะต Supabase Dashboard
2. SQL Editor โ New Query
3. ะกะบะพะฟะธััะนัะต **ะะะกะฌ** ัะฐะนะป `sql/COMPLETE_LINKED_ACCOUNTS_SETUP.sql`
4. ะััะฐะฒััะต ะฒ SQL Editor
5. ะะฐะถะผะธัะต **RUN**
6. ะะพะถะดะธัะตัั ัะพะพะฑัะตะฝะธั: โ ะฃะกะขะะะะะะ ะะะะะะจะะะ ะฃะกะะะจะะ!

### 3๏ธโฃ ะัะพะฒะตัััะต ัะฐะฑะปะธัั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั

1. ะัะบัะพะนัะต Supabase Dashboard
2. Table Editor
3. ะะฐะนะดะธัะต ัะฐะฑะปะธัั **`linked_accounts`**
4. ะัะปะธ ะตั ะะะข - ะฒะตัะฝะธัะตัั ะบ ัะฐะณั 2

### 4๏ธโฃ ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั

```bash
# ะััะฐะฝะพะฒะธัะต ัะตัะฒะตั (Ctrl+C)
# ะัะธััะธัะต ะบะตั Next.js
Remove-Item -Recurse -Force .next

# ะะฐะฟัััะธัะต ัะฝะพะฒะฐ
npm run dev
```

### 5๏ธโฃ ะัะพะฒะตัััะต ัะฐะฑะพัั ัะธััะตะผั

ะัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต:
```
http://localhost:3000/api/linked-accounts/health
```

**ะะถะธะดะฐะตะผัะน ะพัะฒะตั:**
```json
{
  "status": "ok",
  "message": "Linked accounts system is ready",
  "details": { ... }
}
```

**ะัะปะธ ะพัะธะฑะบะฐ:**
```json
{
  "status": "error",
  "message": "Table does not exist...",
  "solution": "Run the SQL script..."
}
```
โ ะะตัะฝะธัะตัั ะบ ัะฐะณั 2

### 6๏ธโฃ ะะพะนะดะธัะต ะฒ ะฟัะธะปะพะถะตะฝะธะต

1. ะะพะนะดะธัะต ะบะฐะบ **owner** ะธะปะธ **admin**
2. ะะฐะฑะธะฝะตั โ ะะฐัััะพะนะบะธ
3. ะัะพะฒะตัััะต ัะตะบัะธั "ะกะฒัะทะฐะฝะฝัะต ะฐะบะบะฐัะฝัั"

## ๐ ะงะะกะขะซะ ะะะะะะะะซ:

### ะัะพะฑะปะตะผะฐ: ะขะฐะฑะปะธัะฐ ะฝะต ัะพะทะดะฐะตััั

**ะะตัะตะฝะธะต:**
1. ะัะพะฒะตัััะต ััะพ ั ะฒะฐั ะตััั ะฟัะฐะฒะฐ ะฒ Supabase
2. ะฃะฑะตะดะธัะตัั ััะพ ัะบะพะฟะธัะพะฒะฐะปะธ ะะะกะฌ SQL ัะฐะนะป
3. ะัะพะฒะตัััะต ะฒัะฒะพะด ะฒ SQL Editor ะฝะฐ ะพัะธะฑะบะธ

### ะัะพะฑะปะตะผะฐ: "Access denied" / "Permission denied"

**ะะตัะตะฝะธะต:**
1. ะัะบัะพะนัะต Table Editor โ `profiles`
2. ะะฐะนะดะธัะต ัะฒะพั ะทะฐะฟะธัั (ะฟะพ email)
3. ะะทะผะตะฝะธัะต `role` ะฝะฐ `'owner'`
4. ะกะพััะฐะฝะธัะต
5. ะะตัะตะทะฐะนะดะธัะต ะฒ ะฟัะธะปะพะถะตะฝะธะต

### ะัะพะฑะปะตะผะฐ: ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะฝะต ัะฐะฑะพัะฐัั

**ะะตัะตะฝะธะต:**
1. ะฃะฑะตะดะธัะตัั ััะพ ัะฐะนะป ะฝะฐะทัะฒะฐะตััั `.env.local` (ะะ `.env`)
2. ะัะพะฒะตัััะต ััะพ ัะฐะนะป ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ
3. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั ะะะะะะกะขะฌะฎ (Ctrl+C ะธ npm run dev)
4. ะัะพะฒะตัััะต ััะพ ะฝะตั ะฟัะพะฑะตะปะพะฒ ะฒ ะบะปััะฐั

### ะัะพะฑะปะตะผะฐ: "SUPABASE_SERVICE_ROLE_KEY not found"

**ะะตัะตะฝะธะต:**
1. ะัะบัะพะนัะต Supabase Dashboard โ Settings โ API
2. ะกะบะพะฟะธััะนัะต `service_role` key (ะะ anon key!)
3. ะะพะฑะฐะฒััะต ะฒ `.env.local`:
   ```
   SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...ะฒะฐั_ะบะปัั
   ```
4. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั

## โ ะงะะะะะกะข ะะะะะะะะ:

- [ ] ะคะฐะนะป `.env.local` ัััะตััะฒัะตั
- [ ] ะัะต 3 ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะทะฐะฟะพะปะฝะตะฝั
- [ ] SQL ัะบัะธะฟั ะฒัะฟะพะปะฝะตะฝ ััะฟะตัะฝะพ
- [ ] ะขะฐะฑะปะธัะฐ `linked_accounts` ะฒะธะดะฝะฐ ะฒ Table Editor
- [ ] ะกะตัะฒะตั ะฟะตัะตะทะฐะฟััะตะฝ
- [ ] `/api/linked-accounts/health` ะฒะพะทะฒัะฐัะฐะตั `"status": "ok"`
- [ ] ะะพะปั ะฟะพะปัะทะพะฒะฐัะตะปั = `owner` ะธะปะธ `admin`

## ๐ ะัะปะธ ะฝะธัะตะณะพ ะฝะต ะฟะพะผะพะณะปะพ:

1. ะัะบัะพะนัะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)
2. ะะตัะตะนะดะธัะต ะฝะฐ ะฒะบะปะฐะดะบั Network
3. ะะพะฟัะพะฑัะนัะต ะพัะบัััั ัะฐะทะดะตะป "ะกะฒัะทะฐะฝะฝัะต ะฐะบะบะฐัะฝัั"
4. ะะฐะนะดะธัะต ะทะฐะฟัะพั ะบ `/api/linked-accounts`
5. ะะพัะผะพััะธัะต Response - ัะฐะผ ะฑัะดะตั ะดะตัะฐะปัะฝะฐั ะพัะธะฑะบะฐ

ะัะธัะปะธัะต ะฟะพะปะฝัะน ัะตะบัั ะพัะธะฑะบะธ ะธะท Response.
